(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],Array(19).concat([function(e,t,a){e.exports=a(45)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(24),a(2)),l=a(7),i=(a(25),a(26),a(27),function(e){var t=e.queryStories,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){t(o)}),[t,o]),r.a.createElement("form",{className:"SearchBar-form",onSubmit:function(e){e.preventDefault()}},r.a.createElement("input",{className:"SearchBar-input",placeholder:"Search HONY stories",type:"text",value:o,onChange:function(e){return l(e.target.value)}}))}),u=a(4),m=(a(28),a(29),function(e){var t=e.updateUserWithKey,a=e.user,n=e.logoutUser;return r.a.createElement("div",{className:"GenerateKeyBtn-ctnr"},a.key?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"key-generated-msg"},"API Key Generated!"),r.a.createElement("button",{className:"logout-btn",onClick:n},"Log Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"GenerateKeyBtn",onClick:function(){fetch("/api/keys/new",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(a)}).then((function(){t()}))}},"Generate Key!"),r.a.createElement("button",{className:"logout-btn",onClick:n},"Log Out")))}),p=function(e){var t=e.user,a=e.logoutUser,n=e.searchQuery,c=e.filteredStoriesLength,o=e.allStoriesLength,s=e.updateUserWithKey;return r.a.createElement("div",{className:"InfoBar"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"results-msg"},c,' result(s) match the search query: "',n,'"'),c?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"api-msg"},"API endpoint:"),t?r.a.createElement(r.a.Fragment,null,t.key?r.a.createElement("h3",{className:"api-string"},r.a.createElement("a",{href:"https://hony.herokuapp.com/api/stories?search=".concat(n,"&key=").concat(t.key),target:"_blank",rel:"noopener noreferrer"},"https://hony.herokuapp.com/api/stories?search=",n,"&key=",t.key)):r.a.createElement("h3",{className:"api-string"},"https://hony.herokuapp.com/api/stories?search=",n),r.a.createElement(m,{updateUserWithKey:s,user:t,logoutUser:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"api-string"},"https://hony.herokuapp.com/api/stories?search=",n),r.a.createElement("p",{className:"login-for-key"},"Please ",r.a.createElement(u.b,{to:"/login"},"log in")," or ",r.a.createElement(u.b,{to:"/signup"},"sign up")," to generate an API access key."))):null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"results-msg"},o," stories"),r.a.createElement("h3",{className:"api-msg"},"API endpoint:"),t?r.a.createElement(r.a.Fragment,null,t.key?r.a.createElement("h3",{className:"api-string"},r.a.createElement("a",{href:"https://hony.herokuapp.com/api/stories?key=".concat(t.key),target:"_blank",rel:"noopener noreferrer"},"https://hony.herokuapp.com/api/stories?key=",t.key)):r.a.createElement("h3",{className:"api-string"},"https://hony.herokuapp.com/api/stories"),r.a.createElement(m,{updateUserWithKey:s,user:t,logoutUser:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"api-string"},"https://hony.herokuapp.com/api/stories"),r.a.createElement("p",{className:"login-for-key"},"Please ",r.a.createElement(u.b,{to:"/login"},"log in")," or ",r.a.createElement(u.b,{to:"/signup"},"sign up")," to generate an API access key."))))},h=(a(35),a(36),a(37),function(e){var t=e.query,a=e.content,c=e.idx;return Object(n.useEffect)((function(){if(t.length>2){var e=a.split(t).join('<span class="query-word">'.concat(t,"</span>"));document.getElementById("content-".concat(c)).innerHTML=e}else document.getElementById("content-".concat(c)).innerHTML=a}),[t,a,c]),r.a.createElement("p",{className:"Story-content",id:"content-".concat(c)},a)}),f=(a(38),function(e){var t=e.query,a=e.location,c=e.idx;return Object(n.useEffect)((function(){if(t.length>2){var e=a.split(t).join('<span class="query-word">'.concat(t,"</span>"));document.getElementById("location-".concat(c)).innerHTML="(".concat(e,")")}else document.getElementById("location-".concat(c)).innerHTML="(".concat(a,")")}),[t,a,c]),r.a.createElement("p",{className:"Story-location",id:"location-".concat(c)},"(",a,")")}),g=(a(39),function(e){var t=e.query,a=e.timestamp,c=e.idx;return Object(n.useEffect)((function(){if(t.length>2){var e=a.split(t).join('<span class="query-word">'.concat(t,"</span>"));document.getElementById("timestamp-".concat(c)).innerHTML=e}else document.getElementById("timestamp-".concat(c)).innerHTML=a}),[t,a,c]),r.a.createElement("p",{className:"Story-timestamp",id:"timestamp-".concat(c)},a)}),E=function(e){var t=e.idx,a=e.story,n=e.query;return r.a.createElement("li",{className:"Story",id:"story-".concat(t)},n&&a.timestamp.includes(n)?r.a.createElement(g,{query:n,timestamp:a.timestamp,idx:t}):r.a.createElement("p",{className:"Story-timestamp"},a.timestamp),n&&a.content.includes(n)?r.a.createElement(h,{query:n,content:a.content,idx:t}):r.a.createElement("p",{className:"Story-content"},a.content),a.location&&(n&&a.location.includes(n)?r.a.createElement(f,{query:n,location:a.location,idx:t}):r.a.createElement("p",{className:"Story-location"},"(",a.location,")")),r.a.createElement("img",{className:"Story-img",src:a.url,alt:"honypic"}))},d=function(e){var t=e.stories,a=e.query;return r.a.createElement("ul",{className:"Stories"},t.length?t.map((function(e,t){return r.a.createElement(E,{key:t,idx:t,story:e,query:a})})):null)},y=(a(40),function(){return r.a.createElement("div",{className:"LoadingStories"},"Loading HONY stories...")}),b=(a(41),function(e){return r.a.createElement("h3",{className:"Attributions"},"All HONY content is the work of Brandon Stanton @",r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.humansofnewyork.com/",target:"_blank",rel:"noopener noreferrer"},"Humans of New York"),"\xa0\xa0",r.a.createElement("a",{href:"https://www.facebook.com/humansofnewyork/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-facebook-f"})),"\xa0\xa0",r.a.createElement("a",{href:"https://twitter.com/humansofny",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-twitter"})),"\xa0\xa0",r.a.createElement("a",{href:"https://www.instagram.com/humansofny/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-instagram"})))}),N=function(e){var t=e.user,a=e.logoutUser,n=e.allStories,c=e.queryStories,o=e.searchQuery,s=e.filteredStories,l=e.updateUserWithKey;return r.a.createElement("div",{className:"Home"},n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{queryStories:c}),r.a.createElement("div",{className:"content"},r.a.createElement(b,null),r.a.createElement(p,{user:t,logoutUser:a,searchQuery:o,filteredStoriesLength:s.length,allStoriesLength:n.length,updateUserWithKey:l}),r.a.createElement(d,{stories:o?s:n,query:o}))):r.a.createElement(y,null))},v=a(9),k=a.n(v),w=(a(43),function(e){var t=e.loginUser,a=e.history,c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),h=p[0],f=p[1],g=Object(n.useState)(""),E=Object(s.a)(g,2),d=E[0],y=E[1],b=Object(n.useState)("false"),N=Object(s.a)(b,2),v=N[0],w=N[1],S=function(e){"email"===e.target.name?f(e.target.value):y(e.target.value)};return r.a.createElement("form",{className:"Login",onSubmit:function(e){var n,r;return k.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),n={email:h,password:d,remember:v},c.prev=2,c.next=5,k.a.awrap(fetch("/auth/login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)}).then((function(e){return e.json()})));case 5:if(!(r=c.sent).message){c.next=10;break}throw new Error;case 10:t(r),a.push("/");case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(2),i(["Please check your login details and try again."]);case 17:case"end":return c.stop()}}),null,null,[[2,14]])}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"input",type:"email",name:"email",placeholder:"Your Email",value:h,onChange:S})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"input",type:"password",name:"password",placeholder:"Your Password",value:d,onChange:S})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{className:"checkbox-input",type:"checkbox",onChange:function(e){w("".concat(e.target.checked))}}),"Remember me")),r.a.createElement("div",null,r.a.createElement("button",{className:"login-btn"},"Login"),r.a.createElement(u.b,{to:"/"},"Cancel")),l.length?r.a.createElement("p",{className:"try-again"},l[0]):null)}),S=(a(44),function(e){var t=e.signupUser,a=e.history,c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),h=p[0],f=p[1],g=Object(n.useState)(""),E=Object(s.a)(g,2),d=E[0],y=E[1],b=Object(n.useState)(""),N=Object(s.a)(b,2),v=N[0],w=N[1],S=function(e){"email"===e.target.name?f(e.target.value):"name"===e.target.name?y(e.target.value):w(e.target.value)};return r.a.createElement("form",{className:"Signup",onSubmit:function(e){var n,r;return k.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),n={email:h,name:d,password:v},c.prev=2,c.next=5,k.a.awrap(fetch("/auth/signup",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)}).then((function(e){return e.json()})));case 5:if(!(r=c.sent).message){c.next=10;break}throw new Error;case 10:t(r),a.push("/");case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(2),i(["Email address already exists."]);case 17:case"end":return c.stop()}}),null,null,[[2,14]])}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"input",type:"email",name:"email",placeholder:"Email",value:h,onChange:S})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"input",type:"text",name:"name",placeholder:"Name",value:d,onChange:S})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{className:"input",type:"password",name:"password",placeholder:"Password",value:v,onChange:S})),r.a.createElement("div",null,r.a.createElement("button",{className:"signup-btn"},"Sign Up"),r.a.createElement(u.b,{to:"/"},"Cancel")),l.length?r.a.createElement("p",{className:"try-again"},l[0]):null)}),O=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),u=i[0],m=i[1],p=Object(n.useState)(""),h=Object(s.a)(p,2),f=h[0],g=h[1],E=Object(n.useState)(null),d=Object(s.a)(E,2),y=d[0],b=d[1];Object(n.useEffect)((function(){fetch("/api/stories?key=".concat("YgPgur")).then((function(e){return e.json().then((function(e){c(e.stories)}))}))}),[]);var v=Object(n.useCallback)((function(e){g(e),m(a.filter((function(t){return t.location&&t.location.toLowerCase().includes(e.toLowerCase())||t.storylength.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())||t.timestamp.toLowerCase().includes(e.toLowerCase())})))}),[a]),k=function(e){b(e)},O=function(){fetch("/auth/logout").then((function(e){e.ok&&b(null)}))},j=function(e){b(e)},x=function(){fetch("/api/users/".concat(y.id)).then((function(e){return e.json()})).then((function(e){return b(e)}))};return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(e){var t=e.history;return r.a.createElement(N,{history:t,user:y,logoutUser:O,allStories:a,queryStories:v,searchQuery:f,filteredStories:u,updateUserWithKey:x})}}),r.a.createElement(l.a,{exact:!0,path:"/login",render:function(e){var t=e.history;return r.a.createElement(w,{history:t,loginUser:k})}}),r.a.createElement(l.a,{exact:!0,path:"/signup",render:function(e){var t=e.history;return r.a.createElement(S,{history:t,signupUser:j})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(u.a,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[19,1,2]]]);
//# sourceMappingURL=main.4322c12e.chunk.js.map